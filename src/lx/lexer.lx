# $Id$

/[\r\n\t ]+/;
"#" .. "\n";

"'" .. "'" -> $str {
	# XXX: would be /.+/ here but this incorrectly includes /exit/
	/./ -> $char;
}

'"' .. '"' -> $str {
	'\n'    -> $esc;
	'\t'    -> $esc;
	'\r'    -> $esc;
	'\\'    -> $esc;
	/[^\\]/ -> $char;
}

'/' .. '/' /[i]*/ -> $re {
	/./ -> $char;
}

'='  -> $bind;
'|'  -> $alt;
';'  -> $semi;
'..' -> $to;
'->' -> $map;

'{'  -> $open;
'}'  -> $close;

ident = /([a-z_][a-z0-9_]+)/i;

'$' ident -> $token;
ident -> $ident;

